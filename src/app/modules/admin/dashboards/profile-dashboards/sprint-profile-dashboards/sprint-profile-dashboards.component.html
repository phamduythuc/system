<ng-container *transloco="let t">
  <div [formGroup]="startDate">
    <div class="grid sm:grid-cols-5 gap-6 w-full">
      <div class="sm:col-span-2">
        <mat-form-field class="fuse-mat-no-subscript w-full">
          <mat-label>{{
            "dashboard.profile.tab.sprint.month" | transloco
          }}</mat-label>
          <input
            class=" "
            matInput
            [matDatepicker]="startMonth"
            datePickerFormat="MM/YYYY"
            [formControlName]="'startMonth'"
            placeholder="Choose a date"
          />
          <mat-datepicker-toggle [for]="startMonth"> </mat-datepicker-toggle>
          <mat-datepicker
            #startMonth
            startView="multi-year"
            (yearSelected)="
              chosenYearHandler($event, startDate.get('startMonth'))
            "
            (monthSelected)="
              chosenMonthHandler(
                $event,
                startMonth,
                startDate.get('startMonth')
              )
            "
            panelClass="example-month-picker"
          ></mat-datepicker>
        </mat-form-field>
        <app-error-message
          [control]="startDate.get('startMonth')"
          [name]="'dashboard.profile.tab.sprint.month' | transloco"
        >
        </app-error-message>
      </div>
      <div class="sm:col-span-1 flex justify-end items-end">
        <button
          mat-raised-button
          color="primary"
          class="mr-3"
          [disabled]="startDate.invalid"
          (click)="view()"
        >
          <span>{{ "common.button.view" | transloco }}</span>
        </button>
      </div>
    </div>
  </div>

  <div class="content" [formGroup]="formGroup">
    <div class="w-full flex mb-2 gap-7">
      <div class="w-1/6">
        <div class="w-full">
          <mat-form-field class="fuse-mat-no-subscript w-full">
            <mat-label>
              <!--                        Mức lương / salary-->
              {{ t("dashboard.profile.tab.sprint.salary") }}
            </mat-label>
            <input formControlName="salary" matInput readonly />
          </mat-form-field>
        </div>
      </div>

      <div class="w-1/6">
        <div class="w-full">
          <mat-form-field class="fuse-mat-no-subscript w-full">
            <mat-label>
              <!--                        KPI mục tiêu / target_kpi-->
              {{ t("dashboard.profile.tab.sprint.target_kpi") }}
            </mat-label>
            <input formControlName="target_kpi" matInput readonly />
          </mat-form-field>
        </div>
      </div>

      <div class="w-1/6">
        <div class="w-full">
          <mat-form-field class="fuse-mat-no-subscript w-full">
            <mat-label>
              <!--                        Mức lương thực nhận / salary_received-->
              {{ t("dashboard.profile.tab.sprint.salary_received") }}
            </mat-label>
            <input formControlName="salary_received" matInput readonly />
          </mat-form-field>
        </div>
      </div>

      <div class="w-1/6">
        <div class="w-full">
          <mat-form-field class="fuse-mat-no-subscript w-full">
            <mat-label>
              <!--                        KPI đảm bảo / guaranteed_kpi-->
              {{ t("dashboard.profile.tab.sprint.guaranteed_kpi") }}
            </mat-label>
            <input formControlName="guaranteed_kpi" matInput readonly />
          </mat-form-field>
        </div>
      </div>
    </div>
  </div>

  <div class="data-table w-full mt-4">
    <div class="mb-2 text-base font-semibold uppercase">
      {{ "dashboard.profile.tab.sprint.reality_kpi" | transloco }}
    </div>

    <app-data-table-kpi
      [roleName]="_permissionCodeName"
      [rows]="data?.data"
      [columns]="columns"
      [paginate]="true"
      [limit]="searchModel.pageSize"
      [count]="data?.totalRecords"
      (callback)="handleDataKPI($event)"
      (action)="actionClick($event)"
      (pageChange)="changePage($event)"
    >
    </app-data-table-kpi>

    <div class="sm:col-span-1 flex justify-end items-end">
      <button mat-raised-button color="primary" class="mr-3" (click)="saveData()">
        <span>{{ "button.save" | transloco }}</span>
      </button>
    </div>
  </div>
</ng-container>
