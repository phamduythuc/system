<div class="border mb-8" *ngFor="let item of data; let i = index">
  <div class="border-2 relative pt-5 pb-2 px-5 flex-wrap flex gap-y-5">
    <!-- <p
      class="absolute -top-5 left-5 text-[21px] font-bold z-[100] bg-[#ffffff] px-5"
    >
      Sheet {{ i + 1 }}
    </p> -->

    <!-- Sheet order -->

    <div class="field flex w-full">
      <label class="w-1/6 font-medium flex items-center required">{{
        "hrm-management.reports.form.sheetOrder" | transloco
      }}</label>
      <div class="input w-5/6">
        <mat-form-field
          class="fuse-mat-no-subscript w-full mt-4 sm:mt-0 bg-card"
        >
          <input
            type="number"
            matInput
            [(ngModel)]="item.sheetOrder"
            required
            [readonly]="readonly"
            placeholder="{{
              'hrm-management.reports.form.sheetOrder' | transloco
            }}"
            class="p-0"
            (ngModelChange)="callbackData()"
          />
        </mat-form-field>
        <!-- <app-error-message
        [control]="efforts.controls[index].get('name')"
        [name]="'common.name' | transloco"
      >
      </app-error-message> -->
      </div>
    </div>

    <!-- Name -->

    <div class="field flex w-full">
      <label class="w-1/6 font-medium flex items-center required">{{
        "common.name" | transloco
      }}</label>
      <div class="input w-5/6">
        <mat-form-field
          class="fuse-mat-no-subscript w-full mt-4 sm:mt-0 bg-card"
        >
          <input
            type="text"
            matInput
            [(ngModel)]="item.name"
            required
            [readonly]="readonly"
            placeholder="{{ 'common.name' | transloco }}"
            class="p-0"
            (ngModelChange)="callbackData()"
          />
        </mat-form-field>
        <!-- <app-error-message
          [control]="efforts.controls[index].get('name')"
          [name]="'common.name' | transloco"
        >
        </app-error-message> -->
      </div>
    </div>

    <div class="field flex w-full">
      <!-- Start row -->

      <div class="flex w-1/2">
        <label class="w-1/3 font-medium required">{{
          "hrm-management.reports.form.startRow" | transloco
        }}</label>
        <div class="input w-2/3">
          <mat-form-field
            class="fuse-mat-no-subscript w-full mt-4 sm:mt-0 bg-card"
          >
            <input
              type="text"
              matInput
              [(ngModel)]="item.startRow"
              required
              [readonly]="readonly"
              placeholder="{{
                'hrm-management.reports.form.startRow' | transloco
              }}"
              class="p-0"
              (ngModelChange)="callbackData()"
            />
          </mat-form-field>
          <!-- <app-error-message
                [control]="efforts.controls[index].get('startRow')"
                [name]="'hrm-management.reports.form.startRow' | transloco"
              >
              </app-error-message> -->
        </div>
      </div>

      <!-- Start col -->

      <div class="flex w-1/2">
        <label class="w-1/3 font-medium required ml-4">{{
          "hrm-management.reports.form.startCol" | transloco
        }}</label>
        <div class="input w-2/3">
          <mat-form-field
            class="fuse-mat-no-subscript w-full mt-4 sm:mt-0 bg-card"
          >
            <input
              type="text"
              matInput
              [(ngModel)]="item.startCol"
              required
              [readonly]="readonly"
              placeholder="{{
                'hrm-management.reports.form.startCol' | transloco
              }}"
              class="p-0"
              (ngModelChange)="callbackData()"
            />
          </mat-form-field>
          <!-- <app-error-message
                [control]="efforts.controls[index].get('startCol')"
                [name]="'hrm-management.reports.form.startCol' | transloco"
              >
              </app-error-message> -->
        </div>
      </div>
    </div>

    <!-- SQL -->

    <div class="field flex w-full items-start">
      <label class="w-1/6 font-medium flex items-center required">{{
        "hrm-management.reports.form.sql" | transloco
      }}</label>
      <div class="input w-5/6">
        <mat-form-field
          class="fuse-mat-no-subscript w-full mt-4 sm:mt-0 bg-card"
        >
          <textarea
            matInput
            [(ngModel)]="item.sql"
            required
            placeholder="{{ 'hrm-management.reports.form.sql' | transloco }}"
            class="py-2 m-0 min-h-[100px]"
            [readonly]="readonly"
            (ngModelChange)="callbackData()"
          >
          </textarea>
        </mat-form-field>
        <!-- <app-error-message
          [control]="efforts.controls[index].get('sql')"
          [name]="'hrm-management.reports.form.sql' | transloco"
        >
        </app-error-message> -->
      </div>
    </div>

    <!-- Comment  -->

    <div class="field flex w-full items-start">
      <label class="w-1/6 font-medium flex items-center">{{
        "hrm-management.reports.form.comment" | transloco
      }}</label>
      <div class="input w-5/6">
        <mat-form-field
          class="fuse-mat-no-subscript w-full mt-4 sm:mt-0 bg-card"
        >
          <textarea
            matInput
            [(ngModel)]="item.comment"
            required
            placeholder="{{
              'hrm-management.reports.form.comment' | transloco
            }}"
            [readonly]="readonly"
            class="py-2 m-0 min-h-[100px]"
            (ngModelChange)="callbackData()"
          >
          </textarea>
        </mat-form-field>
        <!-- <app-error-message
          [control]="efforts.controls[index].get('comment')"
          [name]="'hrm-management.reports.form.comment' | transloco"
        >
        </app-error-message> -->
      </div>
    </div>

    <!-- List param  -->

    <div class="field w-full" *ngIf="!readonly">
      <label class="w-full font-medium flex items-center">{{
        "hrm-management.reports.form.listParam" | transloco
      }}</label>

      <div class="w-full flex justify-end mx-3">
        <button mat-raised-button color="primary" (click)="addNewParam(i)">
          <mat-icon
            class="icon-size-6"
            svgIcon="heroicons_outline:plus"
          ></mat-icon>
          {{ "hrm-management.reports.form.addParam" | transloco }}
        </button>
      </div>

      <app-data-table
        [rows]="item.listParam || []"
        [columns]="columns"
        [paginate]="false"
        [rowTemplate]="rowTemplate"
        (action)="actionClick($event)"
        (pageChange)="changePage($event)"
        *ngIf="!isLoading"
      >
        <ng-template
          #rowTemplate
          let-row="row"
          let-column="column"
          let-index="index"
        >
          <ng-container [ngSwitch]="column.columnDef">
            <ng-container *ngSwitchCase="'name'">
              <mat-form-field
                class="fuse-mat-no-subscript w-full bg-card my-3 w-[70%]"
              >
                <input
                  type="text"
                  matInput
                  [(ngModel)]="row['name']"
                  required
                  [readonly]="readonly"
                  placeholder="{{
                    'hrm-management.reports.form.name' | transloco
                  }}"
                  class="p-0"
                  (ngModelChange)="callbackData()"
                />
              </mat-form-field>
            </ng-container>

            <ng-container *ngSwitchCase="'paramType'">
              <mat-form-field class="fuse-mat-no-subscript w-full my-3 w-[70%]">
                <mat-select
                  [(ngModel)]="row['type']"
                  (ngModelChange)="changeParamType(index, i)"
                  [disabled]="readonly"
                >
                  <mat-option *ngFor="let r of list_param" [value]="r.code">
                    {{ r.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </ng-container>

            <ng-container *ngSwitchCase="'value'">
              <mat-form-field
                class="fuse-mat-no-subscript w-full bg-card my-3 w-[70%]"
              >
                <input
                  [type]="row['type']"
                  matInput
                  [(ngModel)]="row['value']"
                  required
                  [readonly]="readonly"
                  placeholder="{{
                    'hrm-management.reports.form.startCol' | transloco
                  }}"
                  class="p-0"
                  (ngModelChange)="callbackData()"
                />
              </mat-form-field>
            </ng-container>

            <ng-container *ngSwitchCase="'actionCustom'">
              <button
                mat-icon-button
                class="mat-focus-indicator mat-icon-button mat-button-base ng-star-inserted"
                (click)="deleteParam(index, i)"
              >
                <mat-icon
                  class="icon-size-5"
                  svgIcon="heroicons_outline:trash"
                  title="Close"
                ></mat-icon>
              </button>
            </ng-container>
          </ng-container>
        </ng-template>
      </app-data-table>
    </div>

    <!-- Delete  -->

    <!-- <div class="field flex w-full justify-end">
      <div class="input w-6/6">
        <button
          mat-icon-button
          class="mat-focus-indicator mat-icon-button mat-button-base ng-star-inserted"
          (click)="deleteRow(i)"
        >
          <mat-icon
            class="icon-size-5"
            svgIcon="heroicons_outline:trash"
            title="Close"
          ></mat-icon>
        </button>
      </div>
    </div> -->
  </div>
</div>
