<ng-container *transloco="let t">
  <div class="w-full h-full px-4">
    <mat-card class="bg-card h-full">
      <div [formGroup]="startDate" class="flex justify-between">
           <div class="flex">
             <div class=" h-full px-4 flex gap-5">
               <div class="w-2/3 flex items-center gap-5 w-60">
                 <mat-label class="font-bold">{{
                   "dashboard.profile.tab.sprint.month" | transloco
                   }}</mat-label>
                 <mat-form-field class="fuse-mat-no-subscript w-full">
                   <input
                     class=" "
                     matInput
                     [matDatepicker]="startMonth"
                     datePickerFormat="MM/YYYY"
                     [formControlName]="'startMonth'"
                     placeholder="Choose a date"
                   />
                   <mat-datepicker-toggle [for]="startMonth">
                   </mat-datepicker-toggle>
                   <mat-datepicker
                     #startMonth
                     startView="multi-year"
                     (yearSelected)="
                      chosenYearHandler($event, startDate.get('startMonth'))
                    "
                     (monthSelected)="
                      chosenMonthHandler(
                        $event,
                        startMonth,
                        startDate.get('startMonth')
                      )
                    "
                     panelClass="example-month-picker"
                   ></mat-datepicker>
                 </mat-form-field>
               </div>
             </div>

             <div class="content overflow-hidden flex  gap-3">
               <div class="input min-w-140">
                 <mat-form-field
                   class="fuse-mat-no-subscript w-full  sm:mt-0 bg-card">
                   <input class="w-full"
                          [placeholder]="('common.keyword' | transloco)+' ...'"
                          formControlName="keyword"
                          matInput trim='blur'
                          (keyup.enter)="view()">
                 </mat-form-field>
               </div>

               <button type="submit" mat-raised-button color="primary"
                       (click)="view()">
                 <mat-icon
                   matPrefix
                   class="icon-size-5"
                   [svgIcon]="'heroicons_solid:search'"></mat-icon>
                 <span>{{t("common.search")}}</span>
               </button>
             </div>
           </div>

            <button type="submit" mat-raised-button color="primary" (click)="openDialog()">
              <mat-icon
                matPrefix
                class="icon-size-5"
                [svgIcon]="'heroicons_outline:plus-circle'">
              </mat-icon>
              <span>{{'hrm-management.addHeader' | transloco}}</span>
            </button>
      </div>
      <div class="content mt-4 w-full">
        <div class="data-table w-full mt-4">
            <app-data-table
            [roleName]="_permissionCodeName"
            [rows]="this.dataTable.dataIndex || []"
            [columns]="columns"
            [paginate]="true"
            [(limit)]="sizePage"
            [(pageIndex)]="defaultPage"
            [count]="searchResult?.totalRecords"
            [rowTemplate]="rowTemplate"
            (action)="actionClick($event)"
            (pageChange)="changePage($event)"
          >
          <!-- slice: paginate.size * paginate.page : paginate.size * (paginate.page + 1) -->
          <ng-template #rowTemplate let-row="row" let-column="column">

            <ng-container [ngSwitch]="column.columnDef">
              <ng-container *ngSwitchDefault>{{
                row[column.columnDef]
              }}</ng-container>
              <ng-container *ngSwitchCase="'salaryActual'" >
                <div class="box-percent">
                  <mat-form-field
                    class="fuse-mat-no-subscript w-full mt-4 sm:mt-0 bg-card"
                  >
                    <input
                      class="w-full"
                      matInput
                      trim="blur"
                      #rateInput="ngModel"
                      [(ngModel)]="row[column.columnDef]"
                      (ngModelChange)="change(row['staffId'])"
                      (keydown)="validateNumber($event)"
                    />
                  </mat-form-field>
                </div>
                <!-- <div
                  class="errors"
                  *ngIf="rateInput.errors && (rateInput.dirty || rateInput.touched)"
                >
                  <div [hidden]="!rateInput.errors.pattern">
                    <span>{{
                      "hrm-management.salary.time_percent_err_1" | transloco
                    }}</span>
                  </div>
                  <div [hidden]="!rateInput.errors.required">
                    {{ "hrm-management.salary.time_percent_err" | transloco }}
                  </div>
                </div> -->
              </ng-container>

            </ng-container>
          </ng-template>
          </app-data-table>
        </div>
      </div>
      <div class="w-full flex justify-end items-end">
        <button
          mat-raised-button
          color="primary"
          class="mr-3"
          (click)="saveData(searchResult?.data)"
        >
        <mat-icon
          class="icon-size-5 mr-2"
          svgIcon="heroicons_outline:check"
        ></mat-icon>
          <span>{{ "button.save" | transloco }}</span>
        </button>
      </div>
    </mat-card>
  </div>

</ng-container>
